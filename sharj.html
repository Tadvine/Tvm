<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
<META HTTP-EQUIV="Expires" CONTENT="-1">
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
<link href="https://fonts.googleapis.com/css2?family=Zain:wght@200;300;400;700;800;900&display=swap" rel="stylesheet">
<title>Sharj</title>
<style>
    body {
        font-family: Zain, sans-serif;
        background-color: #f0f0f0;
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        font-size: 15px; 
    }
    .container {
        background-color: #fff;
        padding: 20px;
        border-radius: 25px;
        box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
        width: 90%;
        max-width: 800px;
        margin: 20px auto;
    }
    h2 { 
        font-family: 'tahoma', sans-serif;        
        color: white;
        text-shadow: 1px 1px 3px black, 0 0 25px blue, 0 0 5px darkblue;
        font-size: 32px; 
    } 
    input[type="text"], select {
        width: 50%;
        padding: 10px;
        margin: 10px 0;
        border: 2px solid #ccc;
        border-radius: 6px;
        box-sizing: border-box;
        font-size: 22px;
    }
    .mybutton{
        background-color:#4d4d4d;
        font-family: 'Zain', sans-serif;
        padding: 10px;
        border-radius: 16px;
        box-shadow: 0 0 9px rgb(207, 207, 207);
        color:#fff;
        font-size:16px;
        margin: 5px;
    }
    .mybutton:hover{
        background-color:#cccccc;
        color:#000;
        border: none;
        cursor: pointer;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
        font-family: 'Noto Kufi Arabic', sans-serif;
    }
    th, td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: center;
    }
    th {
        background-color: #f2f2f2;
        color: #333;
    }
    .input-field {
        margin: 10px 0;
    }
    .icon {
        margin-left: 5px;
        width: 50px;
        height: 50px;
        vertical-align: middle;
    }
    .tabs {
        display: flex;
        justify-content: space-around;
        margin-bottom: 20px;
    }
    .tabs button {
        font-family: 'Zain', sans-serif;
        padding: 10px 20px;
        cursor: pointer;
        background-color: #4d4d4d;
        color: white;
        border: none;
        border-radius: 5px;
        outline: none;
    }
    .tabs button.active {
        background-color: #9992D7;
    }
    .tab-content {
        display: none;
    }
    .tab-content.active {
        display: block;
    }
    .button-container {
        margin-top: 20px;
    }
    .info-box {
        text-align: right;
        direction: rtl;
        padding: 15px;
        margin: 20px;
        background-color: #f5f5f5;
        border-radius: 10px;
        font-family: 'Zain', sans-serif;
    }
    .resident-table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        font-family: 'Zain', sans-serif;
    }
    .resident-table th {
        background-color: #4d4d4d;
        color: white;
        padding: 12px;
        text-align: center;
    }
    .resident-table td {
        padding: 10px;
        border-bottom: 1px solid #ddd;
        text-align: right;
    }
    .resident-table tr:nth-child(even) {
        background-color: #f9f9f9;
    }
    .resident-table tr:hover {
        background-color: #f1f1f1;
    }
</style>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
<div class="container">
    <div class="tabs">
        <button class="tab-link active" onclick="openTab(event, 'tab1')">ØªÙ‡ÛŒÙ‡ Ù„ÛŒØ³Øª</button>
        <button class="tab-link" onclick="openTab(event, 'tab2')">Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø³Ø§Ø®ØªÙ…Ø§Ù†</button>
        <button class="tab-link" onclick="openTab(event, 'tab3')">Ù…Ø¨Ù„Øº Ø´Ø§Ø±Ú˜</button>
    </div>
    
    <div id="tab1" class="tab-content active">
        <center>
            <h2>Ù„ÛŒØ³Øª Ø´Ø§Ø±Ú˜ Ø³Ø§Ø®ØªÙ…Ø§Ù†</h2>
            <br>
            <form id="inputForm">
                <label for="month">
                    Ù…Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ø§Ù‡
                    <img src="https://raw.githubusercontent.com/Tadvine/Tvm/refs/heads/main/sharj/calendar.png" alt="" class="icon">
                </label>
                <select id="month" name="month" style="padding: 10px; border-radius: 6px; font-size: 16px;" required>
                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ù…Ø§Ù‡</option>
                    <option value="ÙØ±ÙˆØ±Ø¯ÛŒÙ†">ÙØ±ÙˆØ±Ø¯ÛŒÙ†</option>
                    <option value="Ø§Ø±Ø¯ÛŒØ¨Ù‡Ø´Øª">Ø§Ø±Ø¯ÛŒØ¨Ù‡Ø´Øª</option>
                    <option value="Ø®Ø±Ø¯Ø§Ø¯">Ø®Ø±Ø¯Ø§Ø¯</option>
                    <option value="ØªÛŒØ±">ØªÛŒØ±</option>
                    <option value="Ù…Ø±Ø¯Ø§Ø¯">Ù…Ø±Ø¯Ø§Ø¯</option>
                    <option value="Ø´Ù‡Ø±ÛŒÙˆØ±">Ø´Ù‡Ø±ÛŒÙˆØ±</option>
                    <option value="Ù…Ù‡Ø±">Ù…Ù‡Ø±</option>
                    <option value="Ø¢Ø¨Ø§Ù†">Ø¢Ø¨Ø§Ù†</option>
                    <option value="Ø¢Ø°Ø±">Ø¢Ø°Ø±</option>
                    <option value="Ø¯ÛŒ">Ø¯ÛŒ</option>
                    <option value="Ø¨Ù‡Ù…Ù†">Ø¨Ù‡Ù…Ù†</option>
                    <option value="Ø§Ø³ÙÙ†Ø¯">Ø§Ø³ÙÙ†Ø¯</option>
                </select>
                <br>
                
                <label for="num1">
                    Ù…ØªÙØ±Ù‚Ù‡
                    <img src="https://raw.githubusercontent.com/Tadvine/Tvm/refs/heads/main/sharj/mo.png" alt="" class="icon">
                </label>
                <input type="text" id="num1" name="num1" value="Û°" oninput="validateAndFormatNumber(this)">
                <br>
                
                <label for="season">
                    ÙÙ€ØµÙ€Ù€Ù€Ù€Ù€Ù„
                    <img src="https://raw.githubusercontent.com/Tadvine/Tvm/refs/heads/main/sharj/gaz.png" alt="" class="icon">
                </label>
                <select id="season" name="season" style="padding: 10px; border-radius: 6px; font-size: 16px;">
                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                    <option value="winter">Ø²Ù…Ø³ØªØ§Ù†Ù‡</option>
                    <option value="summer">ØªØ§Ø¨Ø³ØªØ§Ù†Ù‡</option>
                </select>
                <br>
                
                <label for="num2">
                    Ù…Ø¨Ù„Øº Ú¯Ø§Ø²
                    <img src="https://raw.githubusercontent.com/Tadvine/Tvm/refs/heads/main/sharj/gaz.png" alt="" class="icon">
                </label>
                <input type="text" id="num2" name="num2" value="Û°" oninput="validateAndFormatNumber(this)">
                <br>
                
                <label for="num3">
                    Ù…Ø¨Ù„Øº Ø¢Ø¨
                    <img src="https://raw.githubusercontent.com/Tadvine/Tvm/refs/heads/main/sharj/ab.jpg" alt="" class="icon">
                </label>
                <input type="text" id="num3" name="num3" value="Û°" oninput="validateAndFormatNumber(this)">
                <br>
                
                <label for="num4">
                    Ù…Ø¨Ù„Øº Ø¨Ø±Ù‚
                    <img src="https://raw.githubusercontent.com/Tadvine/Tvm/refs/heads/main/sharj/bargh.png" alt="" class="icon">
                </label>
                <input type="text" id="num4" name="num4" value="Û°" oninput="validateAndFormatNumber(this)">
                <br><br><br>
            </form>
            
            <table id="myTable">
                <tr style="background-color: #d3d3d3;">
                    <th>Ø¬Ù…Ø¹</th>
                    <th>Ù…ØªÙØ±Ù‚Ù‡</th>
                    <th>Ø¨Ø±Ù‚</th>
                    <th>Ø¢Ø¨</th>
                    <th>Ú¯Ø§Ø²</th>
                    <th>Ø´Ø§Ø±Ú˜</th>
                    <th>ÙˆØ§Ø­Ø¯</th>
                </tr>
            </table>
            
            <div class="button-container">
                <button type="button" class="mybutton" onClick="createTable()">Ù…Ø­Ø§Ø³Ø¨Ù‡</button>
                <button type="button" class="mybutton" onClick="printTable()">Ú†Ø§Ù¾ Ù„ÛŒØ³Øª</button>
                <button type="button" class="mybutton" onClick="saveData()">Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§</button>
                <button type="button" class="mybutton" onClick="loadData()">Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§</button>
                <button type="button" class="mybutton" onClick="resetPage()">Ø§Ø² Ø§Ø¨ØªØ¯Ø§</button>
            </div>
        </center>
    </div>
    
 <div id="tab2" class="tab-content">
        <center>
            <h2>Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø³Ø§Ø®ØªÙ…Ø§Ù†</h2>
            <h3>Ù„ÛŒØ³Øª Ø³Ø§Ú©Ù†ÛŒÙ† (Ø¬Ù…Ø¹ Ú©Ù„: Û²Û´ Ù†ÙØ±)</h3>
            
            <div class="resident-table-container">
                <table class="resident-table">
                    <thead>
                        <tr>
                            <th>ØªØ¹Ø¯Ø§Ø¯ Ù†ÙØ±Ø§Øª</th>
                            <th>Ù…Ø§Ù„Ú©</th>
                            <th>ÙˆØ§Ø­Ø¯</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Û³</td>
                            <td>Ø¢Ù‚Ø§ÛŒ ÙˆØ­ÛŒØ¯ Ø±Ù†Ø¬Ø¨Ø±Ø§Ù†</td>
                            <td>Ø§ÙˆÙ„ Ø´Ø±Ù‚ÛŒ</td>
                        </tr>
                        <tr>
                            <td>Û±</td>
                            <td>Ø®Ø§Ù†Ù… Ù†ÙˆØ±Ú©ÛŒÙ‡Ø§Ù†ÛŒ</td>
                            <td>Ø§ÙˆÙ„ ØºØ±Ø¨ÛŒ</td>
                        </tr>
                        <tr>
                            <td>Û±</td>
                            <td>Ø¢Ù‚Ø§ÛŒ Ø§ÛŒØ±ÙˆØ§Ù†ÛŒ</td>
                            <td>Ø¯ÙˆÙ… Ø´Ø±Ù‚ÛŒ</td>
                        </tr>
                        <tr>
                            <td>Û³</td>
                            <td>Ø¢Ù‚Ø§ÛŒ Ø±Ù†Ø¬Ø¨Ø±Ø§Ù†</td>
                            <td>Ø¯ÙˆÙ… ØºØ±Ø¨ÛŒ</td>
                        </tr>
                        <tr>
                            <td>Û²</td>
                            <td>Ø®Ø§Ù†Ù… Ø²Ù‡Ø±ÛŒ</td>
                            <td>Ø³ÙˆÙ… Ø´Ø±Ù‚ÛŒ</td>
                        </tr>
                        <tr>
                            <td>Û³</td>
                            <td>Ø¢Ù‚Ø§ÛŒ Ø¹Ø¶Ø§ÛŒÛŒ</td>
                            <td>Ø³ÙˆÙ… ØºØ±Ø¨ÛŒ</td>
                        </tr>
                        <tr>
                            <td>Û°</td>
                            <td>Ø®Ø§Ù„ÛŒ</td>
                            <td>Ú†Ù‡Ø§Ø±Ù… Ø´Ø±Ù‚ÛŒ</td>
                        </tr>
                        <tr>
                            <td>Û´</td>
                            <td>Ø¢Ù‚Ø§ÛŒ Ø­Ø§Ø¬ÛŒØ§</td>
                            <td>Ú†Ù‡Ø§Ø±Ù… ØºØ±Ø¨ÛŒ</td>
                        </tr>
                        <tr>
                            <td>Û²</td>
                            <td>Ø¢Ù‚Ø§ÛŒ Ø§Ø³Ú©ÙˆÛŒÛŒ</td>
                            <td>Ù¾Ù†Ø¬Ù… Ø´Ø±Ù‚ÛŒ</td>
                        </tr>
                        <tr>
                            <td>Ûµ</td>
                            <td>Ø¢Ù‚Ø§ÛŒ Ù…Ø¹Ù…Ø§Ø±ÛŒØ§Ù†</td>
                            <td>Ù¾Ù†Ø¬Ù… ØºØ±Ø¨ÛŒ</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </center>
    </div>
    
    <div id="tab3" class="tab-content">
        <center>
            <h2>Ù…Ø¨Ù„Øº Ø´Ø§Ø±Ú˜ : Û²,ÛµÛ°Û°,Û°Û°Û° Ø±ÛŒØ§Ù„</h2>
            <div class="info-box">
                <h3>Ù†Ø­ÙˆÙ‡ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‡Ø²ÛŒÙ†Ù‡ Ú¯Ø§Ø²:</h3>
                
                <h4>ğŸ”¹ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¯Ø± ÙØµÙ„ Ø²Ù…Ø³ØªØ§Ù†:</h4>
                <p>â€¢ Ù…Ø¨Ù„Øº Ú¯Ø§Ø² Ø¨Ù‡ Ø¯Ùˆ Ø¨Ø®Ø´ Ù…Ø³Ø§ÙˆÛŒ ØªÙ‚Ø³ÛŒÙ… Ù…ÛŒâ€ŒØ´ÙˆØ¯</p>
                <p>â€¢ Ù†ØµÙ Ø§ÙˆÙ„ Ø¨Ù‡ ØµÙˆØ±Øª Ù…Ø³Ø§ÙˆÛŒ Ø¨ÛŒÙ† Ù‡Ù…Ù‡ ÙˆØ§Ø­Ø¯Ù‡Ø§ ØªÙ‚Ø³ÛŒÙ… Ù…ÛŒâ€ŒØ´ÙˆØ¯</p>
                <p>â€¢ Ù†ØµÙ Ø¯ÙˆÙ… Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØ¹Ø¯Ø§Ø¯ Ù†ÙØ±Ø§Øª Ù‡Ø± ÙˆØ§Ø­Ø¯ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø¯</p>
                <p>â€¢ Ø³Ù‡Ù… Ø«Ø§Ø¨Øª Ù‡Ø± ÙˆØ§Ø­Ø¯: ÛŒÚ© Ø¯Ù‡Ù… Ù†ØµÙ Ù…Ø¨Ù„Øº Ú¯Ø§Ø² (Ú¯Ø±Ø¯ Ø´Ø¯Ù‡ Ø¨Ù‡ Ù…Ø¶Ø±Ø¨ Û±Û°,Û°Û°Û° Ø±ÛŒØ§Ù„)</p>
                
                <h4>ğŸ”¹ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¯Ø± ÙØµÙ„ ØªØ§Ø¨Ø³ØªØ§Ù†:</h4>
                <p>â€¢ Ú©Ù„ Ù…Ø¨Ù„Øº Ú¯Ø§Ø² ÙÙ‚Ø· Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØ¹Ø¯Ø§Ø¯ Ù†ÙØ±Ø§Øª Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯</p>
                <p>â€¢ Ù‡Ø± ÙˆØ§Ø­Ø¯ Ø¨Ù‡ Ù†Ø³Ø¨Øª ØªØ¹Ø¯Ø§Ø¯ Ø³Ø§Ú©Ù†ÛŒÙ† Ø®ÙˆØ¯ Ù‡Ø²ÛŒÙ†Ù‡ Ù¾Ø±Ø¯Ø§Ø®Øª Ù…ÛŒâ€ŒÚ©Ù†Ø¯</p>
                
                <h4>ğŸ“Œ Ù†Ú©Ø§Øª Ù…Ù‡Ù…:</h4>
                <p>â€¢ ÙˆØ§Ø­Ø¯Ù‡Ø§ÛŒ Ø¨Ø¯ÙˆÙ† Ø³Ø§Ú©Ù† Ø§Ø² Ù¾Ø±Ø¯Ø§Ø®Øª Ù‡Ø²ÛŒÙ†Ù‡ Ú¯Ø§Ø² Ùˆ Ø¢Ø¨ Ùˆ Ø¨Ø±Ù‚ Ù…Ø¹Ø§Ù Ù‡Ø³ØªÙ†Ø¯</p>
                <p>â€¢ Ø¢Ø¨ Ùˆ Ø¨Ø±Ù‚ Ù‡Ù…ÛŒØ´Ù‡ Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØ¹Ø¯Ø§Ø¯ Ù†ÙØ±Ø§Øª Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯</p>
                <p>â€¢ Ù‡Ø²ÛŒÙ†Ù‡ Ù…ØªÙØ±Ù‚Ù‡ Ø¨Ù‡ ØµÙˆØ±Øª Ù…Ø³Ø§ÙˆÛŒ Ø¨ÛŒÙ† ÙˆØ§Ø­Ø¯Ù‡Ø§ ØªÙ‚Ø³ÛŒÙ… Ù…ÛŒâ€ŒØ´ÙˆØ¯</p>
            </div>
        </center>
    </div>
</div>

<script>
    const persianDigits = "Û°Û±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹";
    const englishDigits = "0123456789";

    function toPersianNumber(input) {
        return input.replace(/\d/g, function(d) {
            return persianDigits[d];
        });
    }

    function toEnglishNumber(input) {
        return input.replace(/[Û°-Û¹]/g, function(d) {
            return englishDigits[persianDigits.indexOf(d)];
        });
    }

    function formatNumberWithComma(input) {
        let parts = input.toString().split(".");
        parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        return parts.join(".");
    }

    function validateAndFormatNumber(input) {
        let value = input.value.replace(/,/g, '');
        value = toEnglishNumber(value);
        if (isNaN(value)) {
            Swal.fire({
                icon: 'error',
                title: 'Ø®Ø·Ø§',
                text: ' ! Ù„Ø·ÙØ§Ù‹ ÙÙ‚Ø· Ø¹Ø¯Ø¯ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯',
                confirmButtonText: 'Ø¨Ø§Ø´Ù‡'
            });
            input.value = '';
        } else {
            value = formatNumberWithComma(value);
            value = toPersianNumber(value);
            if (value.startsWith('Û°') && value.length > 1) {
                value = value.slice(1);
            }
            input.value = value;
        }
    }

    function parseNumber(num) {
        let englishNum = num.replace(/[Û°-Û¹]/g, function(d) {
            return englishDigits[persianDigits.indexOf(d)];
        });
        return parseFloat(englishNum.replace(/,/g, '')) || 0;
    }

    function calculateUnitCost(baseCost, unitPeople, totalPeople) {
        if (totalPeople === 0) return 0;
        return Math.round((baseCost / totalPeople) * unitPeople / 10000) * 10000;
    }

    function validateForm() {
        const month = document.getElementById('month').value;
        if (!month) {
            Swal.fire({
                icon: 'error',
                title: 'Ø®Ø·Ø§',
                text: 'Ù„Ø·ÙØ§Ù‹ Ù…Ø§Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯',
                confirmButtonText: 'Ø¨Ø§Ø´Ù‡'
            });
            return false;
        }

        const num2 = parseNumber(document.getElementById('num2').value);
        const season = document.getElementById('season').value;
        if (num2 > 0 && !season) {
            Swal.fire({
                icon: 'error',
                title: 'Ø®Ø·Ø§',
                text: 'Ù„Ø·ÙØ§Ù‹ Ø¨Ø±Ø§ÛŒ Ù…Ø¨Ù„Øº Ú¯Ø§Ø²ØŒ ÙØµÙ„ Ù…Ø±Ø¨ÙˆØ·Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯',
                confirmButtonText: 'Ø¨Ø§Ø´Ù‡'
            });
            return false;
        }

        return true;
    }

    function createTable() {
        if (!validateForm()) return;
        
        var num1 = parseNumber(document.getElementById('num1').value);
        var num2 = parseNumber(document.getElementById('num2').value);
        var num3 = parseNumber(document.getElementById('num3').value);
        var num4 = parseNumber(document.getElementById('num4').value);
        var season = document.getElementById('season').value;

        // Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙˆØ§Ø­Ø¯Ù‡Ø§
        var units = [
            {name: "Ø§ÙˆÙ„ Ø´Ø±Ù‚ÛŒ", people: 3, owner: "Ø¢Ù‚Ø§ÛŒ ÙˆØ­ÛŒØ¯ Ø±Ù†Ø¬Ø¨Ø±Ø§Ù†"},
            {name: "Ø§ÙˆÙ„ ØºØ±Ø¨ÛŒ", people: 1, owner: "Ø®Ø§Ù†Ù… Ù†ÙˆØ±Ú©ÛŒÙ‡Ø§Ù†ÛŒ"},
            {name: "Ø¯ÙˆÙ… Ø´Ø±Ù‚ÛŒ", people: 1, owner: "Ø¢Ù‚Ø§ÛŒ Ø§ÛŒØ±ÙˆØ§Ù†ÛŒ"},
            {name: "Ø¯ÙˆÙ… ØºØ±Ø¨ÛŒ", people: 3, owner: "Ø¢Ù‚Ø§ÛŒ Ø±Ù†Ø¬Ø¨Ø±Ø§Ù†"},
            {name: "Ø³ÙˆÙ… Ø´Ø±Ù‚ÛŒ", people: 2, owner: "Ø®Ø§Ù†Ù… Ø²Ù‡Ø±ÛŒ"},
            {name: "Ø³ÙˆÙ… ØºØ±Ø¨ÛŒ", people: 3, owner: "Ø¢Ù‚Ø§ÛŒ Ø¹Ø¶Ø§ÛŒÛŒ"},
            {name: "Ú†Ù‡Ø§Ø±Ù… Ø´Ø±Ù‚ÛŒ", people: 0, owner: ""},
            {name: "Ú†Ù‡Ø§Ø±Ù… ØºØ±Ø¨ÛŒ", people: 4, owner: "Ø¢Ù‚Ø§ÛŒ Ø­Ø§Ø¬ÛŒØ§"},
            {name: "Ù¾Ù†Ø¬Ù… Ø´Ø±Ù‚ÛŒ", people: 2, owner: "Ø¢Ù‚Ø§ÛŒ Ø§Ø³Ú©ÙˆÛŒÛŒ"},
            {name: "Ù¾Ù†Ø¬Ù… ØºØ±Ø¨ÛŒ", people: 5, owner: "Ø¢Ù‚Ø§ÛŒ Ù…Ø¹Ù…Ø§Ø±ÛŒØ§Ù†"}
        ];

        var totalPeople = units.reduce((sum, unit) => sum + unit.people, 0);
        var makharej = Math.round(num1 / 10 / 10000) * 10000;
        var sharj = 2500000;

        // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ú¯Ø§Ø² Ø¨Ø± Ø§Ø³Ø§Ø³ ÙØµÙ„
        var gasBaseCost, gasFixedCost;
        if (season === 'winter') {
            gasBaseCost = num2 / 2;
            gasFixedCost = Math.round((num2 / 2) / 10 / 10000) * 10000;
        } else if (season === 'summer') {
            gasBaseCost = num2;
            gasFixedCost = 0;
        } else {
            gasBaseCost = 0;
            gasFixedCost = 0;
        }

        // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ù‡Ø± ÙˆØ§Ø­Ø¯
        var data = [];
        units.forEach(unit => {
            var gasCost = 0;
            if (unit.people > 0) {
                gasCost = calculateUnitCost(gasBaseCost, unit.people, totalPeople) + gasFixedCost;
            }
            
            var abCost = calculateUnitCost(num3, unit.people, totalPeople);
            var barghCost = calculateUnitCost(num4, unit.people, totalPeople);
            var jam = sharj + gasCost + abCost + barghCost + makharej;
            
            data.push(
                jam, makharej, barghCost, abCost, gasCost, sharj, unit.name
            );
        });

        function formatNumber(num) {
            return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        var table = document.getElementById("myTable");
        while (table.rows.length > 1) {
            table.deleteRow(1);
        }

        for (var i = 0; i < units.length; i++) {
            var row = table.insertRow();
            for (var j = 0; j < 7; j++) {
                var cell = row.insertCell();
                var value = data[i * 7 + j];
                cell.innerHTML = value !== undefined ? toPersianNumber(formatNumber(value)) : "";
            }
        }
    }

    function printTable() {
        var printWindow = window.open('', '', 'height=400,width=600');
        printWindow.document.write('<html><head><title>Ù„ÛŒØ³Øª Ø´Ø§Ø±Ú˜</title>');
        printWindow.document.write('<style>table { border-collapse: collapse; width: 100%; }');
        printWindow.document.write('th, td { border: 1px solid black; padding: 15px; text-align: center; font-size: 28px; }');
        printWindow.document.write('th { font-size: 30px; }');
        printWindow.document.write('</style></head><body>');
        printWindow.document.write(document.getElementById("myTable").outerHTML);
        printWindow.document.write('</body></html>');
        printWindow.document.close();
        printWindow.print();
    }

    function saveData() {
        if (!validateForm()) return;
        
        const month = document.getElementById('month').value;
        
        Swal.fire({
            title: 'Ù†Ø§Ù… ÙØ§ÛŒÙ„ Ø°Ø®ÛŒØ±Ù‡',
            input: 'text',
            inputValue: `Ø´Ø§Ø±Ú˜-${month}`,
            inputLabel: 'Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ù†Ø§Ù… ÙØ§ÛŒÙ„ Ø±Ø§ ØªØºÛŒÛŒØ± Ø¯Ù‡ÛŒØ¯',
            showCancelButton: true,
            confirmButtonText: 'Ø°Ø®ÛŒØ±Ù‡',
            cancelButtonText: 'Ø§Ù†ØµØ±Ø§Ù',
            inputValidator: (value) => {
                if (!value) {
                    return 'Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… ÙØ§ÛŒÙ„ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯';
                }
            }
        }).then((result) => {
            if (result.isConfirmed) {
                const filename = result.value;
                
                const data = {
                    month: month,
                    num1: document.getElementById('num1').value,
                    num2: document.getElementById('num2').value,
                    num3: document.getElementById('num3').value,
                    num4: document.getElementById('num4').value,
                    season: document.getElementById('season').value,
                    timestamp: new Date().toLocaleString('fa-IR')
                };
                
                const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${filename}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                Swal.fire({
                    icon: 'success',
                    title: 'Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯',
                    text: `ÙØ§ÛŒÙ„ ${filename} Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯`,
                    confirmButtonText: 'Ø¨Ø§Ø´Ù‡'
                });
            }
        });
    }

    function loadData() {
        Swal.fire({
            title: 'Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§',
            text: ' Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ ÙØ§ÛŒÙ„ Ø¨Ù‡ ÙÙˆÙ„Ø¯Ø± Ø¯Ø§Ù†Ù„ÙˆØ¯ Ù…Ø±Ø§Ø¬Ø¹Ù‡ Ú©Ù†ÛŒØ¯ ',
            icon: 'info',
            confirmButtonText: 'Ø§Ù†ØªØ®Ø§Ø¨ ÙØ§ÛŒÙ„'
        }).then(() => {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = e => {
                const file = e.target.files[0];
                const reader = new FileReader();
                
                reader.onload = event => {
                    try {
                        const data = JSON.parse(event.target.result);
                        loadDataIntoForm(data);
                    } catch (error) {
                        Swal.fire({
                            icon: 'error',
                            title: 'Ø®Ø·Ø§',
                            text: 'ÙØ§ÛŒÙ„ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ Ù…Ø¹ØªØ¨Ø± Ù†ÛŒØ³Øª',
                            confirmButtonText: 'Ø¨Ø§Ø´Ù‡'
                        });
                    }
                };
                
                reader.readAsText(file);
            };
            
            input.click();
        });
    }

    function loadDataIntoForm(data) {
        document.getElementById('month').value = data.month;
        document.getElementById('num1').value = data.num1;
        document.getElementById('num2').value = data.num2;
        document.getElementById('num3').value = data.num3;
        document.getElementById('num4').value = data.num4;
        document.getElementById('season').value = data.season;
        
        Swal.fire({
            icon: 'success',
            title: 'Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø´Ø¯',
            html: `Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ${data.month} Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯Ù†Ø¯<br><small>Ø¢Ø®Ø±ÛŒÙ† Ø°Ø®ÛŒØ±Ù‡: ${data.timestamp}</small>`,
            confirmButtonText: 'Ø¨Ø§Ø´Ù‡'
        });
    }

    function resetPage() {
        document.getElementById("inputForm").reset();
        
        var table = document.getElementById("myTable");
        while (table.rows.length > 1) {
            table.deleteRow(1);
        }
        
        window.scrollTo(0, 0);
    }

    function openTab(evt, tabName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tab-content");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tab-link");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.className += " active";
    }
</script>
</body>
</html>